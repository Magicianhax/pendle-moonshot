{
  "timestamp": "2025-10-03T15:00:00.000Z",
  "description": "Almanak TVL Breakdown for Points Calculation",
  "pointsSystem": {
    "dailyPointsDistributed": 333333,
    "distributionMethod": "Pro-rata based on weighted TVL",
    "boosts": {
      "yt": "5x (Yield Tokens - highest boost)",
      "curve": "3x (Curve Pool liquidity)",
      "lp": "1.25x (Pendle Liquidity Providers)",
      "other": "1x (All other TVL)",
      "pt": "0x (Principal Tokens get ZERO points)"
    },
    "IMPORTANT": "PT (Principal Token) holders receive NO points. YT gets highest boost at 5x!",
    "pricing": "All alUSD-related TVL valued at $1.02 per alUSD for consistency"
  },
  "tvlBreakdown": {
    "defiLlamaTvl": 110032544.16,
    "usdcBalance": 11225007.94,
    "usdtBalance": 293975.30,
    "totalTvl": 121551527.40,
    "note": "Total TVL = DeFiLlama + USDC + USDT balances"
  },
  "pendleBreakdown": {
    "lpTvl": "From Pendle market liquidity.usd (gets 1.25x boost)",
    "ytTvl": "From YT token contract 0xd7c3fc198Bd7A50B99629cfe302006E9224f087b via Etherscan totalSupply API. YT TVL = supply × $1.02 (gets 5x boost)",
    "curveTvl": "From Curve pool 0xDCD0f5ab30856F28385F641580Bbd85f88349124. Curve TVL = (USDC × $1) + (alUSD × $1.02) (gets 3x boost)",
    "ptTvl": "From Pendle totalPt × $1.02 (COMPLETELY EXCLUDED from points)",
    "otherTvl": "Total TVL - LP TVL - YT TVL - Curve TVL - PT TVL (gets 1x boost)",
    "note": "YT supply fetched directly from token contract. All alUSD valued at $1.02. PT is subtracted from total TVL to ensure PT holders get 0 points"
  },
  "weightedTvlCalculation": {
    "step1": "Calculate component TVLs: YT = supply × $1.02, PT = supply × $1.02, Curve = (USDC + alUSD balances)",
    "step2": "Exclude PT and categorized TVL: Other = Total - LP - YT - Curve - PT",
    "step3": "Apply boosts: Weighted = (Other × 1) + (YT × 5) + (Curve × 3) + (LP × 1.25)",
    "example": "If Total=150M, PT=20M, YT=80M, Curve=1M, LP=5M: Other=44M, Weighted=44M + 400M + 3M + 6.25M = 453.25M",
    "note": "PT is excluded. All alUSD valued at $1.02 for consistency"
  },
  "pointsCalculation": {
    "dailyPoints": "For user's YT: (YT amount * 5) / totalWeightedTvl * 333,333",
    "totalPoints": "dailyPoints * daysToMaturity",
    "usdValue": "totalPoints * tokenPrice (where tokenPrice = FDV / 1B tokens)",
    "apy": "(usdValue / ytAmount) * (365 / daysToMaturity) * 100%"
  },
  "apiEndpoints": {
    "defiLlama": "https://api.llama.fi/tvl/almanak",
    "etherscanUsdc": "https://api.etherscan.io/v2/api?chainid=1&module=account&action=tokenbalance&contractaddress=0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48&address=0x6402D60bEE5e67226F19CFD08A1734586e6c3954",
    "etherscanUsdt": "https://api.etherscan.io/v2/api?chainid=1&module=account&action=tokenbalance&contractaddress=0xdAC17F958D2ee523a2206206994597C13D831ec7&address=0x70684224814a75e1b4b45de162f2456db4d66510",
    "etherscanYtSupply": "https://api.etherscan.io/v2/api?chainid=1&module=stats&action=tokensupply&contractaddress=0xd7c3fc198Bd7A50B99629cfe302006E9224f087b",
    "pendleMarket": "https://api-v2.pendle.finance/core/v2/1/markets/0x79f06a8dc564717a9ad418049d0be9a60f2646c0/data"
  }
}

